@using Microsoft.IdentityModel.Tokens
@model IEnumerable<LotteryChecker.Common.Models.Entities.SearchHistoryVm>

@{
    ViewData["Title"] = "Index"; 
    var errors = TempData["ErrorMessage"] as IEnumerable<string>;
    if (errors != null)
    {
        foreach (var error in errors)
        {
            <p class="text-danger">@error</p>
        }
    }
}

@{
    @if (!Model.IsNullOrEmpty())
    {
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th class="text-center">Vé</th>
                    <th class="text-center">Ngày tìm</th>
                    <th class="text-center">Ngày quay</th>
                </tr>
            </thead>
            <tbody class="fs-6 text-center">
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.LotteryNumber)</td>
                        <td>@item.SearchDate.ToString("dd/MM/yyyy")</td>
                        <td>@item.DrawDate.ToString("dd/MM/yyyy")</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else if (TempData["User"] == null)
    {
        <p class="text-danger">Đăng nhập để lưu lại lịch sử tìm kiếm của bạn.</p>
    }
    else
    {
        <p class="text-danger">Chưa có lịch sử tìm kiếm.</p>
    }
}